var watchHistory={jqueryLoaded:!1,csv:"Date,Title,Season,Episode",createScript:function(a,b){var d=document.createElement("script");d.src=a;d.addEventListener("load",b);document.getElementsByTagName("head")[0].appendChild(d)},parse:function(){var a=$("#viewingactivity .retableRow");$.each(a,function(a){watchHistory.parseRow($(this))});a=document.createElement("a");a.href="data:attachment/csv,"+encodeURIComponent(watchHistory.csv);a.target="_blank";a.download="NetflixWatchHistory.csv";document.body.appendChild(a);
a.click()},parseRow:function(a){var b="",d="",c="",e="",b=$(a).find(".seriestitle");0<b.length?(b=b[0],c=$(b).parent().contents()[1].nodeValue.substr(1),b=$(b).html().trim(),e=c.indexOf(":"),d=c.substr(0,e).trim(),'"'!=d.substring(0,1)?(c=c.substr(e+1),c=c.trim().split('"').join("")):(c=c.trim().split('"').join(""),d="")):b=$(a).find(".title>a").text();var f=$(a).children(".date").html();a=f.substr(0,2);e=f.substr(3,2);f="20"+f.substr(6,2);e=new Date(parseInt(f),e-1,a);watchHistory.csv+="\n"+e.toLocaleDateString()+
',"'+b+'","'+d+'","'+c+'"'},init:function(a){watchHistory.createScript("https://code.jquery.com/jquery-2.1.3.min.js",watchHistory.parse)}};watchHistory.init();